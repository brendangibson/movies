(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{19:function(e,t,a){e.exports=a(49)},24:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),o=(a(24),a(2)),i=a.n(o),s=a(13),u=a(1),m="dbcee211",d=function(e){return fetch("http://www.omdbapi.com/?s="+e+"&apikey="+m)},f=Object(u.selectorFamily)({key:"movieSearch",get:function(e){return function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.get,!e){t.next=9;break}return t.next=4,d(e);case 4:if(!(n=t.sent).ok){t.next=8;break}return r=n.json(),t.abrupt("return",r);case 8:throw new Error(n.statusText);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),v=Object(u.atom)({key:"searchStringAtom",default:""}),h=Object(u.atom)({key:"selected",default:new Set}),E=Object(u.atom)({key:"cartOpen",default:!1}),b=function(){var e=Object(u.useSetRecoilState)(v);return r.a.createElement("div",{className:"shadow flex rounded bg-white"},r.a.createElement("input",{className:"w-full p-2 rounded",type:"text",placeholder:"Search for a movie...",onChange:function(t){return e(t.target.value)}}),r.a.createElement("span",{role:"img","aria-label":"search",className:"text-3xl"},"\ud83d\udd0e"))},p=function(){var e=Object(u.useRecoilValue)(h),t=Object(u.useSetRecoilState)(E);return r.a.createElement("div",{className:"self-end relative cursor-pointer ml-auto text-4xl",onClick:function(){return t(!0)}},r.a.createElement("span",{role:"img","aria-label":"cart"},"\ud83d\uded2"),e.size?r.a.createElement("div",{"data-test":"size",className:"absolute rounded-full h-8 w-8 bg-red-600 absolute top-0 right-0 text-center text-xl"},e.size):null)},x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"flex flex-row h-16 fixed bg-gray-800 w-full p-2 z-50"},r.a.createElement(b,null),r.a.createElement(p,null)),r.a.createElement("div",{className:"h-16"}))},w=function(e){var t=e.url,a=e.title;return r.a.createElement("div",null,"N/A"===t?r.a.createElement("div",{className:"bg-gray-400 m-1 p-1 absolute inset-0"},a):r.a.createElement("img",{src:t,alt:a}))},g=a(3),k=function(e){var t=e.movie,a=Object(u.useRecoilState)(h),n=Object(g.a)(a,2),l=n[0],c=n[1],o=l.has(t);return r.a.createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){o?l.delete(t):l.add(t),c(l)}},o?r.a.createElement("div",{className:"absolute right-0 bottom-0 text-center bg-opacity-75 bg-white rounded-full h-10 w-10 m-3"},r.a.createElement("span",{className:"text-green-500 text-2xl font-extrabold"},"\u2713")):null)},y=a(14),N=a.n(y),j=function(e){var t=e.movie,a=e.size,n=void 0===a?"large":a,l=e.selectable,c=void 0===l||l,o="small"===n;return r.a.createElement("div",{className:N()("relative p-1 min-h-40",{"w-32 md:w-64":!o},{"w-16 md:w-32":o})},r.a.createElement(w,{title:t.Title,url:t.Poster}),c?r.a.createElement(k,{movie:t}):null)},O=function(){var e=Object(u.useRecoilValue)(v),t=Object(u.useRecoilValue)(f(e)),a=null===t||void 0===t?void 0:t.Search;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"text-gray-200"},a?"Click on a movie to add it to your cart":"Type more letters to get search results"),r.a.createElement("div",{className:"flex flex-row flex-wrap justify-around"},null===a||void 0===a?void 0:a.map((function(e){return r.a.createElement(j,{movie:e,key:e.imdbID})}))))},S=a(15),C=a(16),R=a(18),z=a(17),F=function(e){Object(R.a)(a,e);var t=Object(z.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(C.a)(a,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"No results"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),a}(r.a.Component),V=function(){return r.a.createElement("div",{className:"p-2"},r.a.createElement(F,null,r.a.createElement(n.Suspense,{fallback:"Loading..."},r.a.createElement(O,null))))},D=function(e){var t=e.open,a=void 0!==t&&t,n=e.children,l=e.onClose,c=a?"":"hidden";return r.a.createElement("div",{onClick:l,className:"fixed inset-0 z-50 overflow-auto bg-opacity-50 bg-gray-100 flex ".concat(c)},r.a.createElement("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex shadow-xl"},n))},I=function(){var e=Object(u.useRecoilState)(E),t=Object(g.a)(e,2),a=t[0],n=t[1],l=Object(u.useRecoilValue)(h),c=[];return l.forEach((function(e){return c.push(r.a.createElement(j,{movie:e,key:e.imdbID,size:"small",selectable:!1}))})),r.a.createElement(D,{open:a,onClose:function(){return n(!1)}},r.a.createElement("h2",{className:"text-3xl"},"Cart"),r.a.createElement("div",{className:"flex flex-wrap"},c),r.a.createElement("p",null,"Click to dismiss"))},T=function(){return r.a.createElement(u.RecoilRoot,null,r.a.createElement(x,null),r.a.createElement("div",{className:"p-2"},r.a.createElement(V,null),r.a.createElement(I,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.71382e51.chunk.js.map